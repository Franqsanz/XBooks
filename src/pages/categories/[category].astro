---
import Layouts from '../../layouts/MainLayouts.astro';
import books from '../../data/data.js';
import Info from '../../components/Info.astro';

export function getStaticPaths() {
  // const slugify = url => (url.replace(/[^a-z0-9 -]/g, '').replace(/\s+/g, '-'));

  return books.map((c) => {
    return {
      params: { category: c.url_category },
      props: { c }
    }
  });
}

// const { category } = Astro.request.params;
const { c } = Astro.props;
---

<Layouts title={c.category}>
  <Info title={c.category} text="" />

  <section class="container py-4 flex flex-wrap justify-center items-center">
      <figure
        class="flex justify-center flex-col items-center m-3 shadow-lg rounded-lg overflow-hidden bg-white"
      >
        <picture>
          <img
            class="max-w-full w-96 h-96 object-cover rounded-none md:h-auto mx-auto"
            src={c.img}
            alt=""
          />
        </picture>
        <figcation>
          <div class="w-80 mx-5 py-5 px-3 sm:px-5 md:mx-0">
            <span
              class="p-1 text-lg rounded-lg border border-lime-400 text-lime-700 bg-lime-50"
            >
              {c.category}
            </span>
            <h1 class="text-3xl text-lime-600 mt-2 py-2 font-medium">
              {c.title}
            </h1>
            <p class="py-2">{c.description}</p>
            <h2 class="text-xl py-2 font-medium">Autor</h2>
            <span>{c.autor}</span>
            <h2 class="text-xl py-2 font-medium">Calificación</h2>
            <span>{c.calificacion}</span>
            <h2 class="text-xl py-2 font-medium">Cantidad de paginas</h2>
            <span>{c.cantidad_de_paginas}</span>
            <h2 class="text-xl py-2 font-medium">Fecha de publicación</h2>
            <span>{c.fecha_de_publicacion}</span>
          </div>
        </figcation>
      </figure>
  </section>
</Layouts>